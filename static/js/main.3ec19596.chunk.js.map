{"version":3,"sources":["components/Book.js","components/Button.js","components/Header.js","components/Modal.js","store/books/actions.js","components/AddBookModal.style.js","components/AddBookModal.js","pages/BookShelf.js","pages/Book.js","store/books/selectors.js","store/books/reducer.js","store/index.js","store/persistence.js","App.js","reportWebVitals.js","index.js"],"names":["StyledBook","styled","div","Book","id","name","author","remove","className","onClick","e","preventDefault","onRemove","StyledButton","button","props","variant","Button","children","StyledHeader","h1","Header","StyledModal","Modal","parent","document","body","onConfirm","onCancel","ReactDOM","createPortal","ADD_BOOK","REMOVE_BOOK","StyledBody","StyledTitle","h2","StyledError","h3","StyledForm","form","FullRowCell","initialState","customFields","reducer","state","action","type","value","key","map","field","index","prop","connect","dispatch","dispatchAddBook","book","close","useState","error","setError","useReducer","updateValue","updateCustomField","htmlFor","onChange","target","Fragment","placeholder","addCustomField","BookList","gridView","GridControls","StyledLink","Link","books","dispatchRemoveBook","removeBook","history","useHistory","query","URLSearchParams","useLocation","search","sort","get","view","isSortAsc","isGridView","bookModalOpen","setBookModalOpen","set","push","pathname","toString","title","a","b","upNameA","toUpperCase","upNameB","to","StyledDetails","selectBook","find","useParams","size","booksStore","v4","filter","persistedStore","serializedState","localStorage","getItem","JSON","parse","console","loadStore","store","createStore","BookStore","window","__REDUX_DEVTOOLS_EXTENSION__","subscribe","stringify","setItem","saveStore","getState","Layout","App","exact","path","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.3ec19596.chunk.js","sourcesContent":["import styled from \"styled-components\";\n\nconst StyledBook = styled.div`\n  display: flex;\n  flex-grow: 1;\n  position: relative;\n  flex-direction: column;\n  justify-content: center;\n  padding: 20px;\n  border: 1px solid pink;\n  text-overflow: ellipsis;\n  overflow: hidden;\n\n  .remove {\n    position: absolute;\n    top: 0;\n    right: 0;\n    color: black;\n    font-size: 16px;\n    padding: 10px;\n    border: 1px solid black;\n\n    &:hover,\n    &:active,\n    &:focus {\n      background-color: black;\n      color: white;\n    }\n  }\n\n  .text {\n    margin-top: 20px;\n    color: black;\n    text-decoration: none;\n\n    > div:last-child {\n      margin-top: 10px;\n    }\n  }\n`;\n\nfunction Book({ id, name = \"\", author = \"\", remove = () => {} }) {\n  function onRemove(e) {\n    e.preventDefault();\n    remove(id);\n  }\n\n  return (\n    <StyledBook>\n      <span className=\"remove\" onClick={(e) => onRemove(e)}>\n        X\n      </span>\n      <div className=\"text\">\n        <div>Name: {name}</div>\n        {author && <div>Author: {author}</div>}\n      </div>\n    </StyledBook>\n  );\n}\n\nexport default Book;\n","import styled from \"styled-components\";\n\nconst StyledButton = styled.button`\n  display: flex;\n  align-items: center;\n  background-color: transparent;\n  border: ${(props) => (props.variant === \"text\" ? 0 : \"1px solid lightblue\")};\n  padding: 10px 20px;\n  cursor: pointer;\n  outline: 0;\n\n  &:active {\n    background-color: lightblue;\n  }\n`;\n\nfunction Button({ onClick = () => {}, variant = \"primary\", children }) {\n  return (\n    <StyledButton variant={variant} onClick={onClick}>\n      {children}\n    </StyledButton>\n  );\n}\n\nexport default Button;\n","import styled from \"styled-components\";\n\nconst StyledHeader = styled.h1`\n  text-align: center;\n`;\n\nfunction Header({ children }) {\n  return <StyledHeader>{children}</StyledHeader>;\n}\n\nexport default Header;\n","import ReactDOM from \"react-dom\";\nimport styled from \"styled-components\";\n\nimport Button from \"./Button\";\n\nconst StyledModal = styled.div`\n  position: fixed;\n  z-index: 1;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  overflow: hidden;\n  background-color: rgba(0, 0, 0, 0.5);\n\n  > div {\n    display: flex;\n    flex-direction: column;\n    width: 500px;\n    min-height: 300px;\n    margin: 50px auto;\n    background-color: white;\n    border-radius: 4px;\n    border: 1px solid grey;\n    padding: 20px;\n\n    .content {\n      display: flex;\n      flex-grow: 1;\n    }\n\n    .footer {\n      display: flex;\n      justify-content: flex-end;\n\n      > button:last-child {\n        margin-left: 10px;\n      }\n    }\n  }\n`;\n\nfunction Modal({\n  parent = document.body,\n  onConfirm = () => {},\n  onCancel = () => {},\n  children,\n}) {\n  return ReactDOM.createPortal(\n    <StyledModal>\n      <div>\n        <div className=\"content\">{children}</div>\n        <div className=\"footer\">\n          <Button onClick={onCancel}>Cancel</Button>\n          <Button onClick={onConfirm}>Done</Button>\n        </div>\n      </div>\n    </StyledModal>,\n    parent\n  );\n}\n\nexport default Modal;\n","export const ADD_BOOK = \"ADD_BOOK\";\nexport const REMOVE_BOOK = \"REMOVE_BOOK\";\n\nexport function addBook(book) {\n  return { type: ADD_BOOK, book };\n}\n\nexport function removeBook(id) {\n  return { type: REMOVE_BOOK, id };\n}\n","import styled from \"styled-components\";\n\nexport const StyledBody = styled.div`\n  width: 100%;\n  margin-bottom: 20px;\n`;\n\nexport const StyledTitle = styled.h2`\n  text-align: center;\n`;\n\nexport const StyledError = styled.h3`\n  color: red;\n  text-align: center;\n`;\n\nexport const StyledForm = styled.form`\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  row-gap: 20px;\n  column-gap: 20px;\n  align-items: center;\n  flex: 1;\n`;\n\nexport const FullRowCell = styled.div`\n  grid-column: 1/-1;\n  display: flex;\n  justify-content: center;\n`;\n","import React, { useReducer, useState } from \"react\";\nimport { connect } from \"react-redux\";\n\nimport Modal from \"../components/Modal\";\nimport Button from \"../components/Button\";\nimport { addBook } from \"../store/books/actions\";\n\nimport {\n  StyledBody,\n  StyledTitle,\n  StyledError,\n  StyledForm,\n  FullRowCell,\n} from \"./AddBookModal.style\";\n\nconst initialState = {\n  name: \"\",\n  author: \"\",\n  customFields: [],\n};\n\nconst reducer = (state, action) => {\n  switch (action.type) {\n    case \"UPDATE_NAME\":\n      return {\n        ...state,\n        name: action.value,\n      };\n    case \"UPDATE_AUTHOR\":\n      return {\n        ...state,\n        author: action.value,\n      };\n    case \"ADD_CUSTOM_FIELD\":\n      return {\n        ...state,\n        customFields: [...state.customFields, { key: \"\", value: \"\" }],\n      };\n    case \"UPDATE_CUSTOM_FIELD\":\n      return {\n        ...state,\n        customFields: state.customFields.map((field, index) => {\n          if (index === action.field.index) {\n            return {\n              ...field,\n              [action.field.prop]: action.field.value,\n            };\n          }\n          return field;\n        }),\n      };\n    default:\n      return state;\n  }\n};\n\nfunction AddBookModal({ dispatchAddBook, close = () => {} }) {\n  const [error, setError] = useState(null);\n  const [state, dispatch] = useReducer(reducer, initialState);\n\n  function addBook() {\n    if (!state.name) {\n      setError(\"A book name is required\");\n      return;\n    }\n\n    dispatchAddBook(state);\n    close();\n  }\n\n  function updateValue(type, value) {\n    if (error && type === \"UPDATE_NAME\" && value) {\n      setError(null);\n    }\n    dispatch({ type, value });\n  }\n\n  function addCustomField(e) {\n    e.preventDefault();\n\n    dispatch({ type: \"ADD_CUSTOM_FIELD\" });\n  }\n\n  function updateCustomField(index, prop, value) {\n    dispatch({ type: \"UPDATE_CUSTOM_FIELD\", field: { index, prop, value } });\n  }\n\n  function renderCustomFields() {\n    return state.customFields.map((field, index) => (\n      <React.Fragment key={index}>\n        <input\n          type=\"text\"\n          value={field.key}\n          placeholder=\"Custom field key\"\n          onChange={(e) => updateCustomField(index, \"key\", e.target.value)}\n        />\n        <input\n          type=\"text\"\n          value={field.value}\n          placeholder=\"Custom field value\"\n          onChange={(e) => updateCustomField(index, \"value\", e.target.value)}\n        />\n      </React.Fragment>\n    ));\n  }\n\n  return (\n    <Modal onConfirm={addBook} onCancel={close}>\n      <StyledBody>\n        <StyledTitle>Add a book</StyledTitle>\n        <StyledError>{error}</StyledError>\n        <StyledForm>\n          <label htmlFor=\"name\">Name: </label>\n          <input\n            type=\"text\"\n            id=\"name\"\n            value={state.name}\n            onChange={(e) => updateValue(\"UPDATE_NAME\", e.target.value)}\n          />\n          <label htmlFor=\"author\">Author: </label>\n          <input\n            type=\"text\"\n            id=\"author\"\n            value={state.author}\n            onChange={(e) => updateValue(\"UPDATE_AUTHOR\", e.target.value)}\n          />\n          {renderCustomFields()}\n          <FullRowCell>\n            <Button onClick={(e) => addCustomField(e)}>+ Add new field</Button>\n          </FullRowCell>\n        </StyledForm>\n      </StyledBody>\n    </Modal>\n  );\n}\n\nconst mapDispatchToProps = (dispatch) => ({\n  dispatchAddBook: (id) => dispatch(addBook(id)),\n});\n\nexport default connect(() => ({}), mapDispatchToProps)(AddBookModal);\n","import { useState } from \"react\";\nimport { Link, useLocation, useHistory } from \"react-router-dom\";\nimport { FaChevronDown, FaChevronUp, FaBook } from \"react-icons/fa\";\nimport { connect } from \"react-redux\";\n\nimport styled from \"styled-components\";\nimport Book from \"../components/Book\";\nimport Button from \"../components/Button\";\nimport Header from \"../components/Header\";\nimport AddBookModal from \"../components/AddBookModal\";\nimport { removeBook } from \"../store/books/actions\";\n\nconst BookList = styled.div`\n  display: grid;\n  grid-template-columns: ${(props) =>\n    props.gridView ? \"repeat(auto-fit, 160px);\" : \"1fr\"}\n  column-gap: 20px;\n  row-gap: 20px;\n`;\n\nconst GridControls = styled.div`\n  display: flex;\n  justify-content: space-between;\n  padding: 10px;\n  border: 1px solid black;\n  margin-bottom: 20px;\n`;\n\nconst StyledLink = styled(Link)`\n  display: flex;\n  text-decoration: none;\n  &:focus,\n  &:hover,\n  &:visited,\n  &:link,\n  &:active {\n    text-decoration: none;\n  }\n`;\n\nfunction Bookshelf({ books, dispatchRemoveBook }) {\n  const history = useHistory();\n  const query = new URLSearchParams(useLocation().search);\n  const sort = query.get(\"sort\") || \"asc\";\n  const view = query.get(\"view\") || \"grid\";\n  const isSortAsc = sort === \"asc\";\n  const isGridView = view === \"grid\";\n\n  const [bookModalOpen, setBookModalOpen] = useState(false);\n\n  function openBookModal() {\n    setBookModalOpen(true);\n  }\n\n  function closeBookModal() {\n    setBookModalOpen(false);\n  }\n\n  function toggleSort() {\n    query.set(\"sort\", isSortAsc ? \"desc\" : \"asc\");\n    history.push({ pathname: \"/\", search: `?${query.toString()}` });\n  }\n\n  function toggleGrid() {\n    query.set(\"view\", isGridView ? \"list\" : \"grid\");\n    history.push({ pathname: \"/\", search: `?${query.toString()}` });\n  }\n\n  function removeBook(id) {\n    dispatchRemoveBook(id);\n  }\n\n  function renderBooks() {\n    const sortedBooks = books.sort((a, b) => {\n      const upNameA = a.name.toUpperCase();\n      const upNameB = b.name.toUpperCase();\n      if (isSortAsc) {\n        return upNameA < upNameB ? -1 : upNameA > upNameB ? 1 : 0;\n      } else {\n        return upNameA < upNameB ? 1 : upNameA > upNameB ? -1 : 0;\n      }\n    });\n\n    return sortedBooks.map((book) => (\n      <StyledLink key={book.id} to={`/book/${book.id}`}>\n        <Book\n          id={book.id}\n          name={book.name}\n          author={book.author}\n          remove={removeBook}\n        />\n      </StyledLink>\n    ));\n  }\n\n  return (\n    <div>\n      {bookModalOpen && <AddBookModal close={closeBookModal} />}\n      <Header>Bookshelf</Header>\n      <GridControls>\n        <Button variant=\"text\" onClick={toggleSort}>\n          {isSortAsc ? <FaChevronDown /> : <FaChevronUp />}\n          Sort\n        </Button>\n        <Button onClick={openBookModal}>\n          + <FaBook title=\"add-book\" />\n        </Button>\n        <Button variant=\"text\" onClick={toggleGrid}>\n          {isGridView ? (\n            <span>\n              List/<strong>Grid</strong>\n            </span>\n          ) : (\n            <span>\n              <strong>List</strong>/Grid\n            </span>\n          )}\n        </Button>\n      </GridControls>\n      <BookList gridView={isGridView}>{renderBooks()}</BookList>\n    </div>\n  );\n}\n\nconst mapStateToProps = (state) => ({\n  books: state,\n});\n\nconst mapDispatchToProps = (dispatch) => ({\n  dispatchRemoveBook: (id) => dispatch(removeBook(id)),\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Bookshelf);\n","import React from \"react\";\nimport { connect } from \"react-redux\";\nimport { Link } from \"react-router-dom\";\nimport { useParams } from \"react-router-dom\";\nimport { FaHome } from \"react-icons/fa\";\nimport styled from \"styled-components\";\n\nimport { selectBook } from \"../store/books/selectors\";\nimport Header from \"../components/Header\";\n\nconst StyledError = styled.div`\n  text-align: center;\n  color: red;\n`;\n\nconst StyledDetails = styled.div`\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  max-width: 500px;\n  > div {\n    border: 1px solid black;\n    padding: 10px;\n    text-align: center;\n  }\n`;\n\nfunction Book({ selectBook }) {\n  const { id } = useParams();\n\n  const book = selectBook(id);\n\n  function renderCustomFields() {\n    return book.customFields.map((field, index) => (\n      <React.Fragment key={index}>\n        <div>{field.key}</div>\n        <div>{field.value}</div>\n      </React.Fragment>\n    ));\n  }\n\n  function renderBook() {\n    if (!book) {\n      return <StyledError>Book not found :(</StyledError>;\n    }\n\n    return (\n      <StyledDetails>\n        <div>Name </div>\n        <div>{book.name}</div>\n        {book.author && (\n          <React.Fragment>\n            <div>Author</div>\n            <div>{book.author}</div>\n          </React.Fragment>\n        )}\n        {renderCustomFields()}\n      </StyledDetails>\n    );\n  }\n\n  return (\n    <div>\n      <Header>Book</Header>\n      <Link to=\"/\">\n        <FaHome size=\"2em\" />\n      </Link>\n      <h2>Book details</h2>\n      {renderBook()}\n    </div>\n  );\n}\n\nfunction mapStateToProps(state) {\n  return {\n    selectBook: (id) => selectBook(state, id),\n  };\n}\n\nexport default connect(mapStateToProps)(Book);\n","export function selectBook(state, id) {\n  return state.find((book) => book.id === id);\n}\n","import { v4 } from \"uuid\";\nimport { ADD_BOOK, REMOVE_BOOK } from \"./actions\";\n\nfunction booksStore(state = [], action) {\n  switch (action.type) {\n    case ADD_BOOK:\n      return [\n        ...state,\n        {\n          id: v4(),\n          name: action.book.name,\n          author: action.book.author,\n          customFields: action.book.customFields.filter(\n            (field) => field.key && field.value\n          ),\n        },\n      ];\n    case REMOVE_BOOK:\n      return state.filter((book) => book.id !== action.id);\n    default:\n      return state;\n  }\n}\n\nexport default booksStore;\n","import { createStore } from \"redux\";\n\nimport { loadStore, saveStore } from \"./persistence\";\nimport BookStore from \"./books/reducer\";\n\nconst persistedStore = loadStore();\nconst store = createStore(\n  BookStore,\n  persistedStore,\n  window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__()\n);\n\nstore.subscribe(() => {\n  saveStore({\n    state: store.getState(),\n  });\n});\n\nexport default store;\n","export const loadStore = () => {\n  try {\n    const serializedState = localStorage.getItem(\"store\");\n    if (serializedState === null) {\n      return undefined;\n    }\n    return JSON.parse(serializedState).state;\n  } catch (error) {\n    console.error(\"error reading from localstorage\", error);\n  }\n};\n\nexport const saveStore = (state) => {\n  try {\n    const serializedState = JSON.stringify(state);\n    localStorage.setItem(\"store\", serializedState);\n  } catch (error) {\n    console.error(\"error saving to localstorage\", error);\n  }\n};\n","import { BrowserRouter as Router, Switch, Route } from \"react-router-dom\";\nimport styled from \"styled-components\";\nimport { Provider } from \"react-redux\";\n\nimport Bookshelf from \"./pages/BookShelf\";\nimport Book from \"./pages/Book\";\nimport store from \"./store\";\n\nconst Layout = styled.div`\n  max-width: 880px;\n  margin: 0 auto;\n`;\n\nfunction App() {\n  return (\n    <Router>\n      <Layout>\n        <Provider store={store}>\n          <Switch>\n            <Route exact path=\"/\">\n              <Bookshelf />\n            </Route>\n            <Route path=\"/book/:id\">\n              <Book />\n            </Route>\n          </Switch>\n        </Provider>\n      </Layout>\n    </Router>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}