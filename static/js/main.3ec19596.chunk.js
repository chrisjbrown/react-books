(this.webpackJsonpbookshelf=this.webpackJsonpbookshelf||[]).push([[0],{40:function(n,e,t){},47:function(n,e,t){"use strict";t.r(e);var r=t(1),c=t(0),i=t.n(c),o=t(15),a=t.n(o),u=(t(40),t(3)),l=t(14),d=t(5),s=t(4),j=t(11),b=t(19),f=t(17);function x(){var n=Object(u.a)(["\n  display: flex;\n  flex-grow: 1;\n  position: relative;\n  flex-direction: column;\n  justify-content: center;\n  padding: 20px;\n  border: 1px solid pink;\n  text-overflow: ellipsis;\n  overflow: hidden;\n\n  .remove {\n    position: absolute;\n    top: 0;\n    right: 0;\n    color: black;\n    font-size: 16px;\n    padding: 10px;\n    border: 1px solid black;\n\n    &:hover,\n    &:active,\n    &:focus {\n      background-color: black;\n      color: white;\n    }\n  }\n\n  .text {\n    margin-top: 20px;\n    color: black;\n    text-decoration: none;\n\n    > div:last-child {\n      margin-top: 10px;\n    }\n  }\n"]);return x=function(){return n},n}var h=s.a.div(x());var O=function(n){var e=n.id,t=n.name,c=void 0===t?"":t,i=n.author,o=void 0===i?"":i,a=n.remove,u=void 0===a?function(){}:a;return Object(r.jsxs)(h,{children:[Object(r.jsx)("span",{className:"remove",onClick:function(n){return function(n){n.preventDefault(),u(e)}(n)},children:"X"}),Object(r.jsxs)("div",{className:"text",children:[Object(r.jsxs)("div",{children:["Name: ",c]}),o&&Object(r.jsxs)("div",{children:["Author: ",o]})]})]})};function v(){var n=Object(u.a)(["\n  display: flex;\n  align-items: center;\n  background-color: transparent;\n  border: ",";\n  padding: 10px 20px;\n  cursor: pointer;\n  outline: 0;\n\n  &:active {\n    background-color: lightblue;\n  }\n"]);return v=function(){return n},n}var p=s.a.button(v(),(function(n){return"text"===n.variant?0:"1px solid lightblue"}));var m=function(n){var e=n.onClick,t=void 0===e?function(){}:e,c=n.variant,i=void 0===c?"primary":c,o=n.children;return Object(r.jsx)(p,{variant:i,onClick:t,children:o})};function g(){var n=Object(u.a)(["\n  text-align: center;\n"]);return g=function(){return n},n}var k=s.a.h1(g());var y=function(n){var e=n.children;return Object(r.jsx)(k,{children:e})},w=t(22),C=t(23),_=t(10);function D(){var n=Object(u.a)(["\n  position: fixed;\n  z-index: 1;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  overflow: hidden;\n  background-color: rgba(0, 0, 0, 0.5);\n\n  > div {\n    display: flex;\n    flex-direction: column;\n    width: 500px;\n    min-height: 300px;\n    margin: 50px auto;\n    background-color: white;\n    border-radius: 4px;\n    border: 1px solid grey;\n    padding: 20px;\n\n    .content {\n      display: flex;\n      flex-grow: 1;\n    }\n\n    .footer {\n      display: flex;\n      justify-content: flex-end;\n\n      > button:last-child {\n        margin-left: 10px;\n      }\n    }\n  }\n"]);return D=function(){return n},n}var E=s.a.div(D());var A=function(n){var e=n.parent,t=void 0===e?document.body:e,c=n.onConfirm,i=void 0===c?function(){}:c,o=n.onCancel,u=void 0===o?function(){}:o,l=n.children;return a.a.createPortal(Object(r.jsx)(E,{children:Object(r.jsxs)("div",{children:[Object(r.jsx)("div",{className:"content",children:l}),Object(r.jsxs)("div",{className:"footer",children:[Object(r.jsx)(m,{onClick:u,children:"Cancel"}),Object(r.jsx)(m,{onClick:i,children:"Done"})]})]})}),t)},F="ADD_BOOK",S="REMOVE_BOOK";function T(){var n=Object(u.a)(["\n  grid-column: 1/-1;\n  display: flex;\n  justify-content: center;\n"]);return T=function(){return n},n}function U(){var n=Object(u.a)(["\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  row-gap: 20px;\n  column-gap: 20px;\n  align-items: center;\n  flex: 1;\n"]);return U=function(){return n},n}function N(){var n=Object(u.a)(["\n  color: red;\n  text-align: center;\n"]);return N=function(){return n},n}function B(){var n=Object(u.a)(["\n  text-align: center;\n"]);return B=function(){return n},n}function L(){var n=Object(u.a)(["\n  width: 100%;\n  margin-bottom: 20px;\n"]);return L=function(){return n},n}var P=s.a.div(L()),I=s.a.h2(B()),M=s.a.h3(N()),R=s.a.form(U()),V=s.a.div(T()),X={name:"",author:"",customFields:[]},J=function(n,e){switch(e.type){case"UPDATE_NAME":return Object(_.a)(Object(_.a)({},n),{},{name:e.value});case"UPDATE_AUTHOR":return Object(_.a)(Object(_.a)({},n),{},{author:e.value});case"ADD_CUSTOM_FIELD":return Object(_.a)(Object(_.a)({},n),{},{customFields:[].concat(Object(C.a)(n.customFields),[{key:"",value:""}])});case"UPDATE_CUSTOM_FIELD":return Object(_.a)(Object(_.a)({},n),{},{customFields:n.customFields.map((function(n,t){return t===e.field.index?Object(_.a)(Object(_.a)({},n),{},Object(w.a)({},e.field.prop,e.field.value)):n}))});default:return n}};var z=Object(j.b)((function(){return{}}),(function(n){return{dispatchAddBook:function(e){return n({type:F,book:e})}}}))((function(n){var e=n.dispatchAddBook,t=n.close,o=void 0===t?function(){}:t,a=Object(c.useState)(null),u=Object(b.a)(a,2),l=u[0],d=u[1],s=Object(c.useReducer)(J,X),j=Object(b.a)(s,2),f=j[0],x=j[1];function h(n,e){l&&"UPDATE_NAME"===n&&e&&d(null),x({type:n,value:e})}function O(n,e,t){x({type:"UPDATE_CUSTOM_FIELD",field:{index:n,prop:e,value:t}})}return Object(r.jsx)(A,{onConfirm:function(){f.name?(e(f),o()):d("A book name is required")},onCancel:o,children:Object(r.jsxs)(P,{children:[Object(r.jsx)(I,{children:"Add a book"}),Object(r.jsx)(M,{children:l}),Object(r.jsxs)(R,{children:[Object(r.jsx)("label",{htmlFor:"name",children:"Name: "}),Object(r.jsx)("input",{type:"text",id:"name",value:f.name,onChange:function(n){return h("UPDATE_NAME",n.target.value)}}),Object(r.jsx)("label",{htmlFor:"author",children:"Author: "}),Object(r.jsx)("input",{type:"text",id:"author",value:f.author,onChange:function(n){return h("UPDATE_AUTHOR",n.target.value)}}),f.customFields.map((function(n,e){return Object(r.jsxs)(i.a.Fragment,{children:[Object(r.jsx)("input",{type:"text",value:n.key,placeholder:"Custom field key",onChange:function(n){return O(e,"key",n.target.value)}}),Object(r.jsx)("input",{type:"text",value:n.value,placeholder:"Custom field value",onChange:function(n){return O(e,"value",n.target.value)}})]},e)})),Object(r.jsx)(V,{children:Object(r.jsx)(m,{onClick:function(n){return function(n){n.preventDefault(),x({type:"ADD_CUSTOM_FIELD"})}(n)},children:"+ Add new field"})})]})]})})}));function G(){var n=Object(u.a)(["\n  display: flex;\n  text-decoration: none;\n  &:focus,\n  &:hover,\n  &:visited,\n  &:link,\n  &:active {\n    text-decoration: none;\n  }\n"]);return G=function(){return n},n}function H(){var n=Object(u.a)(["\n  display: flex;\n  justify-content: space-between;\n  padding: 10px;\n  border: 1px solid black;\n  margin-bottom: 20px;\n"]);return H=function(){return n},n}function K(){var n=Object(u.a)(["\n  display: grid;\n  grid-template-columns: ","\n  column-gap: 20px;\n  row-gap: 20px;\n"]);return K=function(){return n},n}var q=s.a.div(K(),(function(n){return n.gridView?"repeat(auto-fit, 160px);":"1fr"})),Q=s.a.div(H()),W=Object(s.a)(l.b)(G());var Y=Object(j.b)((function(n){return{books:n}}),(function(n){return{dispatchRemoveBook:function(e){return n(function(n){return{type:S,id:n}}(e))}}}))((function(n){var e=n.books,t=n.dispatchRemoveBook,i=Object(d.f)(),o=new URLSearchParams(Object(d.g)().search),a=o.get("sort")||"asc",u=o.get("view")||"grid",l="asc"===a,s="grid"===u,j=Object(c.useState)(!1),x=Object(b.a)(j,2),h=x[0],v=x[1];function p(n){t(n)}return Object(r.jsxs)("div",{children:[h&&Object(r.jsx)(z,{close:function(){v(!1)}}),Object(r.jsx)(y,{children:"Bookshelf"}),Object(r.jsxs)(Q,{children:[Object(r.jsxs)(m,{variant:"text",onClick:function(){o.set("sort",l?"desc":"asc"),i.push({pathname:"/",search:"?".concat(o.toString())})},children:[l?Object(r.jsx)(f.b,{}):Object(r.jsx)(f.c,{}),"Sort"]}),Object(r.jsxs)(m,{onClick:function(){v(!0)},children:["+ ",Object(r.jsx)(f.a,{title:"add-book"})]}),Object(r.jsx)(m,{variant:"text",onClick:function(){o.set("view",s?"list":"grid"),i.push({pathname:"/",search:"?".concat(o.toString())})},children:s?Object(r.jsxs)("span",{children:["List/",Object(r.jsx)("strong",{children:"Grid"})]}):Object(r.jsxs)("span",{children:[Object(r.jsx)("strong",{children:"List"}),"/Grid"]})})]}),Object(r.jsx)(q,{gridView:s,children:e.sort((function(n,e){var t=n.name.toUpperCase(),r=e.name.toUpperCase();return l?t<r?-1:t>r?1:0:t<r?1:t>r?-1:0})).map((function(n){return Object(r.jsx)(W,{to:"/book/".concat(n.id),children:Object(r.jsx)(O,{id:n.id,name:n.name,author:n.author,remove:p})},n.id)}))})]})}));function Z(){var n=Object(u.a)(["\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  max-width: 500px;\n  > div {\n    border: 1px solid black;\n    padding: 10px;\n    text-align: center;\n  }\n"]);return Z=function(){return n},n}function $(){var n=Object(u.a)(["\n  text-align: center;\n  color: red;\n"]);return $=function(){return n},n}var nn=s.a.div($()),en=s.a.div(Z());var tn=Object(j.b)((function(n){return{selectBook:function(e){return function(n,e){return n.find((function(n){return n.id===e}))}(n,e)}}}))((function(n){var e=(0,n.selectBook)(Object(d.h)().id);return Object(r.jsxs)("div",{children:[Object(r.jsx)(y,{children:"Book"}),Object(r.jsx)(l.b,{to:"/",children:Object(r.jsx)(f.d,{size:"2em"})}),Object(r.jsx)("h2",{children:"Book details"}),e?Object(r.jsxs)(en,{children:[Object(r.jsx)("div",{children:"Name "}),Object(r.jsx)("div",{children:e.name}),e.author&&Object(r.jsxs)(i.a.Fragment,{children:[Object(r.jsx)("div",{children:"Author"}),Object(r.jsx)("div",{children:e.author})]}),e.customFields.map((function(n,e){return Object(r.jsxs)(i.a.Fragment,{children:[Object(r.jsx)("div",{children:n.key}),Object(r.jsx)("div",{children:n.value})]},e)}))]}):Object(r.jsx)(nn,{children:"Book not found :("})]})})),rn=t(20),cn=t(49);var on=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case F:return[].concat(Object(C.a)(n),[{id:Object(cn.a)(),name:e.book.name,author:e.book.author,customFields:e.book.customFields.filter((function(n){return n.key&&n.value}))}]);case S:return n.filter((function(n){return n.id!==e.id}));default:return n}},an=function(){try{var n=localStorage.getItem("store");if(null===n)return;return JSON.parse(n).state}catch(e){console.error("error reading from localstorage",e)}}(),un=Object(rn.b)(on,an,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());un.subscribe((function(){!function(n){try{var e=JSON.stringify(n);localStorage.setItem("store",e)}catch(t){console.error("error saving to localstorage",t)}}({state:un.getState()})}));var ln=un;function dn(){var n=Object(u.a)(["\n  max-width: 880px;\n  margin: 0 auto;\n"]);return dn=function(){return n},n}var sn=s.a.div(dn());var jn=function(){return Object(r.jsx)(l.a,{children:Object(r.jsx)(sn,{children:Object(r.jsx)(j.a,{store:ln,children:Object(r.jsxs)(d.c,{children:[Object(r.jsx)(d.a,{exact:!0,path:"/",children:Object(r.jsx)(Y,{})}),Object(r.jsx)(d.a,{path:"/book/:id",children:Object(r.jsx)(tn,{})})]})})})})},bn=function(n){n&&n instanceof Function&&t.e(3).then(t.bind(null,50)).then((function(e){var t=e.getCLS,r=e.getFID,c=e.getFCP,i=e.getLCP,o=e.getTTFB;t(n),r(n),c(n),i(n),o(n)}))};a.a.render(Object(r.jsx)(i.a.StrictMode,{children:Object(r.jsx)(jn,{})}),document.getElementById("root")),bn()}},[[47,1,2]]]);
//# sourceMappingURL=main.3ec19596.chunk.js.map